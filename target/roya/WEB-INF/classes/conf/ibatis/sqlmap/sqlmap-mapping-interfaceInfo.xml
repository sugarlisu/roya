<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!-- 项目管理表 -->
<sqlMap namespace="interfaceInfo">
	<resultMap class="com.roya.dto.InterfaceInfoDTO" id="interfaceinfoResult">
		<result property="id" column="ID"/>
		<result property="parentId" column="PARENT_ID"/>                            
		<result property="interfaceName" column="INTERFACE_NAME"/>                
		<result property="interfaceDeveloper" column="INTERFACE_DEVELOPER"/>                        
		<result property="interfaceTester" column="INTERFACE_TESTER"/>                               
		<result property="interfaceUrl" column="INTERFACE_URL"/>                            
		<result property="interfaceContent" column="INTERFACE_CONTENT"/>                  
		<result property="interfaceDesc" column="INTERFACE_DESC"/>                      
		<result property="createDate" column="CREATE_DATE"/>
		<result property="createBy" column="CREATE_BY"/>
		<result property="updateDate" column="UPDATE_DATE"/>
		<result property="updateBy" column="UPDATE_BY"/>
	</resultMap> 
	<insert id="addInterfaceInfo" parameterClass="com.roya.dto.InterfaceInfoDTO">
		<![CDATA[
		INSERT INTO 
			im_interface_info 
		(
			PARENT_ID,
			INTERFACE_NAME,
			INTERFACE_DEVELOPER,
			INTERFACE_TESTER,
			INTERFACE_URL,
			INTERFACE_CONTENT,
			INTERFACE_DESC,
			CREATE_DATE,
			CREATE_BY,
			UPDATE_DATE,
			UPDATE_BY
		)
		VALUES
		(
				#parentId#,
				#interfaceName#,
				#interfaceDeveloper#,
				#interfaceTester#,
				#interfaceUrl#,
				#interfaceContent#,
				#interfaceDesc#,
				#createDate#,
				#createBy#,
				#updateDate#,
				#updateBy#
		)
		]]>
		<selectKey resultClass="int" keyProperty="id">
			SELECT @@IDENTITY AS id
		</selectKey>
	</insert>
	
	<select id="queryInterfaceInfo" resultMap="interfaceinfoResult" parameterClass="com.roya.dto.InterfaceInfoDTO">
		<![CDATA[
			SELECT
				*
			FROM
				im_interface_info  info
			WHERE 
				info.DELETE_TAG='1'
		]]>
			
			order by info.ID desc		
	</select>
	
	<delete id="deleteInterfaceInfo" parameterClass="com.roya.dto.InterfaceInfoDTO">
		<![CDATA[
			update  im_interface_info info set   info.DELETE_TAG='2'  where info.id = #id#  and info.DELETE_TAG='1'
		]]>
	</delete>
	
	<update id="updateInterfaceInfo" parameterClass="java.util.Map">
		update
			im_interface_info info 
		set 
	     <isPropertyAvailable property="parentId" >
          	      <isNotEmpty  prepend="" property="parentId"> info.PARENT_ID = #parentId#,</isNotEmpty>
          	      <isEmpty   prepend="" property="parentId"> info.parentId = null,</isEmpty >
        </isPropertyAvailable>
	     <isPropertyAvailable property="interfaceName" >
          	      <isNotEmpty  prepend="" property="interfaceName"> info.INTERFACE_NAME = #interfaceName#,</isNotEmpty>
          	      <isEmpty   prepend="" property="interfaceName"> info.INTERFACE_NAME = null,</isEmpty >
        </isPropertyAvailable>
	     <isPropertyAvailable property="interfaceDeveloper" >
          	      <isNotEmpty  prepend="" property="interfaceDeveloper"> info.INTERFACE_DEVELOPER = #interfaceDeveloper#,</isNotEmpty>
          	      <isEmpty   prepend="" property="interfaceDeveloper"> info.INTERFACE_DEVELOPER = null,</isEmpty >
        </isPropertyAvailable>
		
   		<isPropertyAvailable property="interfaceTester" >
          	      <isNotEmpty  prepend="" property="interfaceTester"> info.INTERFACE_TESTER = #interfaceTester#,</isNotEmpty>
          	      <isEmpty   prepend="" property="interfaceTester"> info.INTERFACE_TESTER = null,</isEmpty >
        </isPropertyAvailable>
   		<isPropertyAvailable property="interfaceUrl" >
          	      <isNotEmpty  prepend="" property="interfaceUrl"> info.INTERFACE_URL = #interfaceUrl#,</isNotEmpty>
          	      <isEmpty   prepend="" property="interfaceUrl"> info.INTERFACE_URL = null,</isEmpty >
        </isPropertyAvailable>
   		<isPropertyAvailable property="interfaceContent" >
          	      <isNotEmpty  prepend="" property="interfaceContent"> info.INTERFACE_CONTENT = #interfaceContent#,</isNotEmpty>
          	      <isEmpty   prepend="" property="interfaceContent"> info.INTERFACE_CONTENT = null,</isEmpty >
        </isPropertyAvailable>
   		<isPropertyAvailable property="interfaceDesc" >
          	      <isNotEmpty  prepend="" property="interfaceDesc"> info.INTERFACE_DESC = #interfaceDesc#,</isNotEmpty>
          	      <isEmpty   prepend="" property="interfaceDesc"> info.INTERFACE_DESC = null,</isEmpty >
        </isPropertyAvailable>
   		
		info.UPDATE_BY = #updateBy#,
		info.UPDATE_DATE=#updateDate#
		where info.id = #id# and info.delete_tag = '1'
	</update>
	
	
</sqlMap>